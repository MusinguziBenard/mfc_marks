<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast App</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f0f4ff, #e6e9ef);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        header {
            background-color: #4caf50;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin-top: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        .weather, .forecast {
            margin-bottom: 20px;
        }

        h2 {
            color: #333;
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .weather-info, .forecast-info {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
        }

        #current-weather {
            font-size: 1.2rem;
        }

        #forecast {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .forecast-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            width: 30%;
            margin-bottom: 20px;
            text-align: center;
        }

        .forecast-item h4 {
            font-size: 1.2rem;
            color: #4caf50;
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            width: 100%;
            bottom: 0;
        }

        @media (max-width: 768px) {
            #forecast {
                flex-direction: column;
                align-items: center;
            }

            .forecast-item {
                width: 90%;
            }
        }
    </style>
</head>
<body>

<header>Weather Forecast App</header>

<div class="container">
    <section class="weather">
        <h2>Current Weather</h2>
        <div id="current-weather" class="weather-info">Fetching current weather...</div>
    </section>
    
    <section class="forecast">
        <h2>5-Day Weather Forecast</h2>
        <div id="forecast" class="forecast-info">Fetching forecast...</div>
    </section>
</div>

<footer>&copy; 2024 Weather App</footer>

<script>
    const apiKey = '74037a84a785450abf9190335241409';
    let userLatitude, userLongitude;

    function getWeatherData(lat, lon) {
        const currentWeatherUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;
        const forecastUrl = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;

        fetch(currentWeatherUrl)
            .then(response => response.json())
            .then(data => displayCurrentWeather(data));

        fetch(forecastUrl)
            .then(response => response.json())
            .then(data => displayForecast(data));
    }

    function displayCurrentWeather(data) {
        const weatherInfo = document.getElementById('current-weather');
        const { main, weather, name } = data;
        weatherInfo.innerHTML = `
            <h3>Weather in ${name}</h3>
            <p><strong>Temperature:</strong> ${main.temp}°C</p>
            <p><strong>Weather:</strong> ${weather[0].description}</p>
            <p><strong>Humidity:</strong> ${main.humidity}%</p>
            <p><strong>Wind Speed:</strong> ${data.wind.speed} m/s</p>
        `;
    }

    function displayForecast(data) {
        const forecastContainer = document.getElementById('forecast');
        forecastContainer.innerHTML = '';
        const forecastList = data.list.filter((_, index) => index % 8 === 0);
        forecastList.forEach(forecast => {
            const { main, weather, dt_txt } = forecast;
            const date = new Date(dt_txt).toDateString();
            forecastContainer.innerHTML += `
                <div class="forecast-item">
                    <h4>${date}</h4>
                    <p><strong>Temperature:</strong> ${main.temp}°C</p>
                    <p><strong>Weather:</strong> ${weather[0].description}</p>
                </div>
            `;
        });
    }

    function initLocationSync() {
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(position => {
                const { latitude, longitude } = position.coords;
                userLatitude = latitude;
                userLongitude = longitude;
                getWeatherData(userLatitude, userLongitude);
            }, error => {
                alert("Unable to retrieve location. Please enable location services.");
            }, {
                enableHighAccuracy: true,
                maximumAge: 0,
                timeout: 5000
            });
        } else {
            alert('Geolocation is not supported by this browser.');
        }
    }

    window.onload = initLocationSync;
</script>

</body>
</html>

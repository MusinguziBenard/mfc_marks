<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fun Learning Adventure: All-in-One Tutor</title>
<style>
body { font-family: Verdana,sans-serif; background:#f0f8ff; color:#333; text-align:center; margin:0; padding:20px; font-size:28px;}
h1,h2 { color:#ff4500; text-shadow:2px 2px 4px rgba(0,0,0,0.1);}
button {background:#32cd32; color:white; border:none; padding:15px 30px; font-size:32px; margin:10px; cursor:pointer; border-radius:10px; transition: transform 0.2s;}
button:hover {transform:scale(1.1);}
.section {display:none; margin-top:50px;}
#welcome {display:block;}
.word-container, .sentence-container, .math-container {margin:20px auto; width:90%; max-width:800px; background:#fffacd; padding:20px; border-radius:15px; box-shadow:0 4px 8px rgba(0,0,0,0.2);}
.item {display:inline-block; padding:15px 25px; margin:10px; background:#87cefa; border-radius:15px; cursor:pointer; font-size:36px; touch-action:manipulation; transition:background-color 0.3s, transform 0.3s;}
.item.selected {background:#ffd700; transform:scale(1.2);}
.dropzone {min-height:100px; border:3px dashed #ff69b4; border-radius:15px; padding:30px; margin:30px 0; background:#f8f8ff; font-size:36px; display:flex; flex-wrap:wrap; justify-content:center; align-items:center;}
.correct {background:#90ee90 !important; animation:bounce 0.5s;}
.incorrect {background:#ff6347 !important; animation:shake 0.5s;}
@keyframes bounce {0%,100%{transform:translateY(0);}50%{transform:translateY(-30px);}}
@keyframes shake {0%,100%{transform:translateX(0);}25%{transform:translateX(-15px);}75%{transform:translateX(15px);}}
#score{font-size:32px; color:#ffd700; margin-top:20px;}
#rating{font-size:32px; color:#ff4500; margin-top:10px;}
#motivation{font-size:40px; color:#ff1493; margin:20px; animation:pulse 1s infinite;}
@keyframes pulse {0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);}}
.star{font-size:60px; color:#ffd700; display:inline-block; animation:spin 2s linear infinite;}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
canvas{position:fixed; top:0; left:0; pointer-events:none; z-index:1000;}
.demo-animation{margin:20px; padding:20px; background:#ffe4b5; border-radius:10px; font-size:28px; animation:fadeIn 2s;}
@keyframes fadeIn {from{opacity:0;}to{opacity:1;}}
.congrats{font-size:50px; color:#ff4500; animation:bounce 1s infinite; margin:20px;}
input[type="number"]{font-size:32px; padding:10px 20px; margin:10px; border-radius:10px; border:2px solid #32cd32; text-align:center; width:120px;}
@media(max-width:600px){body{padding:10px;font-size:24px;}button{padding:10px 20px;font-size:28px;}.item{padding:10px 20px;font-size:30px;margin:5px;}.dropzone{padding:20px;min-height:100px;}h1,h2{font-size:36px;}#motivation{font-size:32px;}.congrats{font-size:40px;}}
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<div id="welcome" class="section">
<h1>Welcome to Fun Learning Adventure! 🌈</h1>
<p>Learn words, build sentences, and solve math interactively! 🎉</p>
<button onclick="startSpellings()">Learn Words ✨</button>
<button onclick="startSentences()">Build Sentences 🚀</button>
<button onclick="startMath()">Solve Math 🧮</button>
</div>

<div id="spellings" class="section">
<h2>Word Magic! 🪄</h2>
<p>Tap letters or say the word! Hint: <span id="spelling-hint"></span> 📝</p>
<button onclick="speakHint()">Hear Hint! 🔊</button>
<button onclick="provideHint('spelling')">Get a Hint! 🤔</button>
<div id="letters-container" class="word-container"></div>
<div id="spelling-dropzone" class="dropzone"></div>
<button onclick="checkSpelling()">Check My Word! ✅</button>
<div id="spelling-feedback"></div>
<div id="spelling-demo" class="demo-animation">Tap letters or speak the word aloud! 😊</div>
</div>

<div id="sentences" class="section">
<h2>Sentence Builder! 🏗️</h2>
<p>Tap words or speak the sentence! 📖</p>
<button onclick="speakSentenceHint()">Hear Hint! 🔊</button>
<button onclick="provideHint('sentence')">Get a Hint! 🤔</button>
<div id="words-container" class="sentence-container"></div>
<div id="sentence-dropzone" class="dropzone"></div>
<button onclick="checkSentence()">Check My Sentence! ✅</button>
<div id="sentence-feedback"></div>
<div id="sentence-demo" class="demo-animation">Tap words or speak to build the sentence! 🌟</div>
</div>

<div id="math" class="section">
<h2>Math Wizardry! 🧮</h2>
<p>Solve the problem! Speak or type your answer 🗣️✏️</p>
<div id="math-problem" class="math-container"></div>
<input type="number" id="math-answer" placeholder="Your Answer"/>
<button onclick="checkMath()">Submit ✅</button>
<div id="math-feedback"></div>
<div id="math-demo" class="demo-animation">Solve step by step! 🎯</div>
</div>

<div id="score">Stars Earned: 0 ⭐</div>
<div id="rating">Rating: 0%</div>
<div id="motivation"></div>
<div id="congrats" class="congrats"></div>

<script>
let spellingWords=[{word:'cat',hint:'A furry pet 🐱'},{word:'dog',hint:'A loyal friend 🐶'},{word:'sun',hint:'Shines bright ☀️'}];
let sentenceParts=[{correct:'The cat is sleeping.',shuffled:['cat','The','sleeping.','is'],hint:'A pet rests 😴'}];
let usedSpellingIndices=[], usedSentenceIndices=[], score=0, attempts=0, correctCount=0;
let currentWord='', currentSentenceHint='', currentSentenceIndex=0;

// Math problems
let mathProblems=[
{problem:'5 + 3', answer:8, hint:'Add the two numbers 🧮'},
{problem:'10 - 4', answer:6, hint:'Subtract the second number from the first ➖'},
{problem:'6 × 2', answer:12, hint:'Multiply the numbers ✖️'},
{problem:'12 ÷ 3', answer:4, hint:'Divide the first number by the second ➗'}
];
let currentMathIndex=0;

const synth=window.speechSynthesis;
let recognition;
if('webkitSpeechRecognition' in window){
recognition=new webkitSpeechRecognition();
recognition.continuous=true;
recognition.interimResults=false;
recognition.lang='en-US';
recognition.onresult=(event)=>{
let transcript=event.results[event.results.length-1][0].transcript.trim().toLowerCase();
if(document.getElementById('spellings').style.display==='block'){checkSpokenWord(transcript);}
else if(document.getElementById('sentences').style.display==='block'){checkSpokenSentence(transcript);}
else if(document.getElementById('math').style.display==='block'){checkSpokenMath(transcript);}
};
recognition.onerror=(e)=>console.log('SpeechRecognition Error:',e);
recognition.start();
}else{alert('Speech recognition not supported 😢');}

function removeEmojis(text){return text.replace(/[\u{1F600}-\u{1F9FF}\u{1F300}-\u{1F5FF}\u{2600}-\u{27BF}]/gu,'');}
function speak(text){if(synth){let u=new SpeechSynthesisUtterance(removeEmojis(text)); u.rate=0.8; u.pitch=1.2; synth.speak(u);}}
function getRandomIndex(array,used){if(used.length>=array.length){used.length=0;} let index; do{index=Math.floor(Math.random()*array.length);}while(used.includes(index)); used.push(index); return index;}

// Score & motivation
function updateScoreAndRating(){document.getElementById('score').textContent='Stars Earned: '+score+' ⭐'; let rating=Math.round((correctCount/attempts)*100)||0; document.getElementById('rating').textContent='Rating: '+rating+'%';}
function showMotivation(){const messages=['You rock! 🌟','Keep it up! 💪','Awesome job! 🎉','Superstar! 🏆','Brilliant! 🧠','Fantastic! ✨'];const msg=messages[Math.floor(Math.random()*messages.length)];document.getElementById('motivation').textContent=msg;}
function showCongrats(msg){const elem=document.getElementById('congrats'); elem.textContent=msg; setTimeout(()=>{elem.textContent='';},3000);}
function showConfetti(){const canvas=document.getElementById('confetti'); const ctx=canvas.getContext('2d'); canvas.width=window.innerWidth; canvas.height=window.innerHeight; let particles=[]; for(let i=0;i<200;i++){particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*6+2, d:Math.random()*200, color:`hsl(${Math.random()*360},100%,50%)`, tilt:Math.random()*10-10});} let angle=0; function draw(){ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p=>{ctx.beginPath(); ctx.lineWidth=p.r; ctx.strokeStyle=p.color; ctx.moveTo(p.x+p.tilt+p.r/2,p.y); ctx.lineTo(p.x+p.tilt,p.y+p.d/20); ctx.stroke(); p.tilt+=0.1; p.y+=Math.cos(angle+p.d)*1; if(p.y>canvas.height){p.y=0; p.x=Math.random()*canvas.width;} }); angle+=0.01; requestAnimationFrame(draw);} draw();}
function clearConfetti(){const canvas=document.getElementById('confetti'); const ctx=canvas.getContext('2d'); ctx.clearRect(0,0,canvas.width,canvas.height);}

// Start Math
function startMath(){document.getElementById('welcome').style.display='none'; document.getElementById('spellings').style.display='none'; document.getElementById('sentences').style.display='none'; document.getElementById('math').style.display='block'; loadMath(); speak('Let\'s solve math problems! 🧮');}

// Load Math
function loadMath(){clearConfetti(); const index=getRandomIndex(mathProblems,[]); currentMathIndex=index; const mp=mathProblems[index]; document.getElementById('math-problem').textContent='Problem: '+mp.problem+' 🤔'; document.getElementById('math-answer').value=''; document.getElementById('math-feedback').textContent=''; speak(mp.hint);}

// Check Math
function checkMath(){const ans=parseFloat(document.getElementById('math-answer').value); const correct=mathProblems[currentMathIndex].answer; attempts++; if(ans===correct){score++; correctCount++; document.getElementById('math-feedback').textContent='🎉 Correct! Well done!'; speak('Awesome! You solved it correctly! 👏'); showConfetti(); showMotivation(); showCongrats('Math Wizard! 🧙‍♂️'); setTimeout(loadMath,2000);} else{document.getElementById('math-feedback').textContent='Oops! Try again! 💪'; speak('Try again!');} updateScoreAndRating();}

// Speech check Math
function checkSpokenMath(text){const correct=mathProblems[currentMathIndex].answer; if(parseFloat(text)==correct){document.getElementById('math-feedback').textContent='🎉 Correct via speech!'; speak('Amazing! You got it! 👏'); score++; correctCount++; attempts++; updateScoreAndRating(); showConfetti(); showMotivation(); showCongrats('Math Wizard! 🧙‍♂️'); setTimeout(loadMath,2000);}}

// --- Word & Sentence functions (from previous code) can remain the same ---
</script>
</body>
</html>
